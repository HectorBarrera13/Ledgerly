<!doctype html>
<html lang="es" class="dark" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard ‚Äî Ledgerly Admin</title>
    <meta name="description" content="Dashboard de administraci√≥n del backend de Ledgerly">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- CSS est√°tico -->
    <link th:href="@{/css/dashboard.css}" rel="stylesheet" type="text/css">
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <h1 class="logo">üìä Ledgerly</h1>
            <p class="subtitle">Admin Panel</p>
        </div>

        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-section="dashboard">
                <svg class="icon" aria-hidden="true">
                    <use th:href="@{/img/icons.svg#dashboard}"></use>
                </svg>
                <span>Dashboard</span>
            </a>
            <a href="#users" class="nav-item" data-section="users">
                <svg class="icon" aria-hidden="true">
                    <use th:href="@{/img/icons.svg#users}"></use>
                </svg>
                <span>Usuarios</span>
            </a>
            <a href="#logs" class="nav-item" data-section="logs">
                <svg class="icon" aria-hidden="true">
                    <use th:href="@{/img/icons.svg#logs}"></use>
                </svg>
                <span>Logs</span>
            </a>
            <a href="#metrics" class="nav-item" data-section="metrics">
                <svg class="icon" aria-hidden="true">
                    <use th:href="@{/img/icons.svg#metrics}"></use>
                </svg>
                <span>M√©tricas</span>
            </a>
            <a href="#config" class="nav-item" data-section="config">
                <svg class="icon" aria-hidden="true">
                    <use th:href="@{/img/icons.svg#config}"></use>
                </svg>
                <span>Configuraci√≥n</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="server-info">
                <div class="info-item">
                    <span class="label">Servidor:</span>
                    <span class="value" th:text="${serverName}">-</span>
                </div>
                <div class="info-item">
                    <span class="label">Versi√≥n:</span>
                    <span class="value" th:text="${version}">-</span>
                </div>
                <div class="info-item">
                    <span class="label">Instancia:</span>
                    <span class="value" th:text="${instance}">-</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h2 class="page-title">Dashboard</h2>
                <p class="page-subtitle">Monitoreo y administraci√≥n del sistema</p>
            </div>
            <div class="header-right">
                <div class="theme-toggle" id="themeToggle" title="Cambiar tema">
                    <svg class="icon sun-icon" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#sun}"></use>
                    </svg>
                    <svg class="icon moon-icon" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#moon}"></use>
                    </svg>
                </div>
                <div class="status-badge status-online">
                    <span class="status-dot"></span>
                    Online
                </div>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <svg class="stat-icon bg-blue" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#users}"></use>
                    </svg>
                    <div class="stat-info">
                        <h3 id="userCount">0</h3>
                        <p>Usuarios Totales</p>
                    </div>
                    <div class="stat-trend up">+12%</div>
                </div>

                <div class="stat-card">
                    <svg class="stat-icon bg-green" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#uptime}"></use>
                    </svg>
                    <div class="stat-info">
                        <h3 id="uptime" th:text="${uptime}">-</h3>
                        <p>Tiempo Activo</p>
                    </div>
                    <div class="stat-trend">100%</div>
                </div>

                <div class="stat-card">
                    <svg class="stat-icon bg-red" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#cpu}"></use>
                    </svg>
                    <div class="stat-info">
                        <h3 id="latency" th:text="${latency}">-</h3>
                        <p>Latencia</p>
                    </div>
                    <div class="stat-trend down">-5ms</div>
                </div>

                <div class="stat-card">
                    <svg class="stat-icon bg-yellow" aria-hidden="true">
                        <use th:href="@{/img/icons.svg#memory}"></use>
                    </svg>
                    <div class="stat-info">
                        <h3 id="memory">-</h3>
                        <p>Memoria Usada</p>
                    </div>
                    <div class="stat-trend">Normal</div>
                </div>
            </div>

            <!-- Charts and Info -->
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>Informaci√≥n del Sistema</h3>
                        <button class="btn-icon" onclick="refreshSystemInfo()">
                            <svg class="icon" aria-hidden="true">
                                <use th:href="@{/img/icons.svg#refresh}"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="info-list">
                            <div class="info-row">
                                <span class="label">API URL:</span>
                                <span class="value" th:text="${apiUrl}">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Ubicaci√≥n:</span>
                                <span class="value" th:text="${location}">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Java Version:</span>
                                <span class="value" id="javaVersion">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">OS:</span>
                                <span class="value" id="osInfo">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Procesadores:</span>
                                <span class="value" id="processors">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Actividad Reciente</h3>
                    </div>
                    <div class="card-body">
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <div class="activity-icon bg-green">
                                    <svg class="icon" aria-hidden="true">
                                        <use th:href="@{/img/icons.svg#clock}"></use>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-title">Sistema iniciado</p>
                                    <p class="activity-time">Hace <span th:text="${uptime}">-</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card card-full">
                    <div class="card-header">
                        <h3>Accesos R√°pidos</h3>
                    </div>
                    <div class="card-body">
                        <div class="quick-actions">
                            <button class="action-btn" onclick="showSection('users')">
                                <svg class="action-icon" aria-hidden="true">
                                    <use th:href="@{/img/icons.svg#users}"></use>
                                </svg>
                                <span>Ver Usuarios</span>
                            </button>
                            <button class="action-btn" onclick="showSection('logs')">
                                <svg class="action-icon" aria-hidden="true">
                                    <use th:href="@{/img/icons.svg#logs}"></use>
                                </svg>
                                <span>Ver Logs</span>
                            </button>
                            <button class="action-btn" onclick="window.open('/api/docs', '_blank')">
                                <svg class="action-icon" aria-hidden="true">
                                    <use th:href="@{/img/icons.svg#doc}"></use>
                                </svg>
                                <span>Documentaci√≥n</span>
                            </button>
                            <button class="action-btn" onclick="clearCache()">
                                <svg class="action-icon" aria-hidden="true">
                                    <use th:href="@{/img/icons.svg#trash}"></use>
                                </svg>
                                <span>Limpiar Cach√©</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Users Section -->
        <section id="users" class="section">
            <div class="card">
                <div class="card-header">
                    <h3>Gesti√≥n de Usuarios</h3>
                    <button class="btn-primary" onclick="refreshUsers()">
                        <svg class="icon" aria-hidden="true">
                            <use th:href="@{/img/icons.svg#refresh}"></use>
                        </svg>
                        Actualizar
                    </button>
                </div>
                <div class="card-body">
                    <div class="table-controls">
                        <input type="text" class="search-input" placeholder="Buscar usuarios..." id="userSearch">
                        <select class="filter-select" id="userFilter">
                            <option value="all">Todos</option>
                            <option value="active">Activos</option>
                            <option value="inactive">Inactivos</option>
                        </select>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Email</th>
                                    <th>Estado</th>
                                    <th>Fecha Registro</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr>
                                    <td colspan="6" class="text-center">Cargando usuarios...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination" id="usersPagination">
                        <!-- Pagination will be added dynamically -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Logs Section -->
        <section id="logs" class="section">
            <div class="card">
                <div class="card-header">
                    <h3>Logs del Sistema</h3>
                    <div class="header-actions">
                        <select class="filter-select" id="logLevel">
                            <option value="all">Todos los niveles</option>
                            <option value="error">ERROR</option>
                            <option value="warn">WARN</option>
                            <option value="info">INFO</option>
                            <option value="debug">DEBUG</option>
                        </select>
                        <button class="btn-primary" onclick="refreshLogs()">
                            <svg class="icon" aria-hidden="true">
                                <use th:href="@{/img/icons.svg#refresh}"></use>
                            </svg>
                            Actualizar
                        </button>
                        <button class="btn-secondary" onclick="clearLogs()">
                            <svg class="icon" aria-hidden="true">
                                <use th:href="@{/img/icons.svg#trash}"></use>
                            </svg>
                            Limpiar
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="log-container" id="logContainer">
                        <div class="log-entry log-info">
                            <span class="log-time">[2025-11-16 10:30:45]</span>
                            <span class="log-level">INFO</span>
                            <span class="log-message">Sistema iniciado correctamente</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Metrics Section -->
        <section id="metrics" class="section">
            <div class="card">
                <div class="card-header">
                    <h3>M√©tricas del Sistema</h3>
                    <button class="btn-primary" onclick="refreshMetrics()">
                        <svg class="icon" aria-hidden="true">
                            <use th:href="@{/img/icons.svg#refresh}"></use>
                        </svg>
                        Actualizar
                    </button>
                </div>
                <div class="card-body">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <h4>CPU Usage</h4>
                            <div class="metric-value" id="cpuUsage">-</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="cpuBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <h4>Memory Usage</h4>
                            <div class="metric-value" id="memoryUsage">-</div>
                            <div class="metric-bar">
                                <div class="metric-bar-fill" id="memoryBar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="metric-card">
                            <h4>Threads</h4>
                            <div class="metric-value" id="threadsCount">-</div>
                        </div>
                        <div class="metric-card">
                            <h4>Requests/min</h4>
                            <div class="metric-value" id="requestsPerMin">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Config Section -->
        <section id="config" class="section">
            <div class="card">
                <div class="card-header">
                    <h3>Configuraci√≥n del Sistema</h3>
                </div>
                <div class="card-body">
                    <div class="config-section">
                        <h4>Configuraci√≥n General</h4>
                        <div class="config-item">
                            <label>Nombre del Servidor</label>
                            <input type="text" class="config-input" th:value="${serverName}" readonly>
                        </div>
                        <div class="config-item">
                            <label>URL de la API</label>
                            <input type="text" class="config-input" th:value="${apiUrl}" readonly>
                        </div>
                        <div class="config-item">
                            <label>Ubicaci√≥n</label>
                            <input type="text" class="config-input" th:value="${location}" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script th:src="@{/js/dashboard.js}"></script>
</body>
</html>